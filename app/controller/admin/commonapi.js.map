{
    "version": 3,
    "sources": [
        "../../../src/controller/admin/commonapi.js"
    ],
    "names": [
        "Base",
        "require",
        "dbInterfaceCallCount",
        "think",
        "model",
        "dbAdConfigModel",
        "module",
        "exports",
        "__before",
        "isLogined",
        "console",
        "log",
        "redirect",
        "indexAction",
        "filePath",
        "ROOT_PATH",
        "display",
        "interfaceAnalyzeAction",
        "type",
        "get",
        "isEmpty",
        "currentDate",
        "Date",
        "toLocaleDateString",
        "interfaceNames",
        "field",
        "distinct",
        "select",
        "JSON",
        "stringify",
        "interfaceNameArr",
        "Array",
        "i",
        "length",
        "push",
        "interfaceName",
        "toString",
        "interval",
        "date2",
        "setTime",
        "getTime",
        "allDataInDb",
        "where",
        "visitDate",
        "xDateArr",
        "datetmp",
        "resultDataArr",
        "tmpInterfaceName",
        "tmpResultData",
        "Object",
        "name",
        "data",
        "n",
        "j",
        "tmpData",
        "m",
        "timeStamp2String",
        "tmpobj",
        "visitNumb",
        "assign",
        "pieResultArr",
        "min",
        "max",
        "sumVisitNum",
        "value",
        "adConfigAction",
        "getAdConfigDataAction",
        "adConfigData",
        "ctx",
        "json",
        "saveAdConfigAction",
        "id",
        "post",
        "pkg_name",
        "gdt_app_id",
        "gdt_splash_id",
        "gdt_banner_id",
        "gdt_interstitial_id",
        "oppo_gdt_ad_is_open",
        "vivo_gdt_ad_is_open",
        "huawei_gdt_ad_is_open",
        "tencent_gdt_ad_is_open",
        "baidu_gdt_ad_is_open",
        "xiaomi_gdt_ad_is_open",
        "addID",
        "add",
        "error",
        "response",
        "isError",
        "msg",
        "newData",
        "updateAdConfigAction",
        "affectedRows",
        "update",
        "deleteAdConfigAction",
        "delete",
        "success",
        "userInfo",
        "session",
        "time",
        "datetime",
        "replace",
        "year",
        "getFullYear",
        "month",
        "getMonth",
        "date",
        "getDate",
        "hour",
        "getHours",
        "minute",
        "getMinutes",
        "second",
        "getSeconds",
        "checkURL",
        "URL",
        "str",
        "Expression",
        "objExp",
        "RegExp",
        "test"
    ],
    "mappings": "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",
    "file": "../../../src/controller/admin/commonapi.js",
    "sourcesContent": [
        "const Base = require('../base');\nconst dbInterfaceCallCount = think.model('think_interface_call_count');\nconst dbAdConfigModel = think.model('think_ad_config');\nmodule.exports = class extends Base {\n\n    async __before() {\n        var isLogined = await this.isLogined();\n        console.log('__before isLogined = ' + isLogined);\n        if (!isLogined) {\n            return this.redirect('/admin/manager/');\n        }\n    }\n\n\n    async indexAction() {\n        var filePath = `${think.ROOT_PATH}/view/index_index.html`;\n        return this.display(filePath);\n    }\n\n    /**\n     * 接口分析页面\n     * http://127.0.0.1:8360/admin/commonapi/interfaceAnalyze\n     */\n    async interfaceAnalyzeAction() {\n        var filePath = `${think.ROOT_PATH}/view/admin/interface_analyze.html`;\n\n        var type = this.get('type');\n        console.log('type  ======>' + type);\n        if (think.isEmpty(type)) {\n            type = 7;\n        }\n        //折线图\n        //第一步获取接口名称\n        var currentDate = new Date().toLocaleDateString();\n        console.log('step 0.5: ' + currentDate);\n        var interfaceNames = await dbInterfaceCallCount.field('interfaceName').distinct('interfaceName').select();\n        console.log('step 1: ' + JSON.stringify(interfaceNames));\n\n        //第二步接口名称存入数组\n        var interfaceNameArr = new Array();\n        for (var i = 0; i < interfaceNames.length; i++) {\n            interfaceNameArr.push(interfaceNames[i].interfaceName);\n        }\n        console.log('step 2: ' + interfaceNameArr.toString());\n\n        var interval = 7;\n        if (type == 30) {\n            interval = 30;\n        } else if (type == 60) {\n            interval = 60;\n        }\n        //第三步获取前interval天日期存入数组，同时获得前面interval天数据\n        var date2 = new Date();\n        date2.setTime(new Date().getTime() - ((interval - 1) * 24 * 60 * 60 * 1000)); //往前数interval -1 (6)天，包含今天也就是interval(7)天\n        date2 = date2.toLocaleDateString();\n        var allDataInDb = await dbInterfaceCallCount.where({\n            visitDate: ['BETWEEN', date2, currentDate]\n        }).select();\n\n        var xDateArr = new Array();\n        for (var i = (interval - 1); i >= 0; i--) {\n            var datetmp = new Date();\n            datetmp.setTime(new Date().getTime() - (i * 24 * 60 * 60 * 1000)); //往前数6天，包含今天也就是7天\n            datetmp = datetmp.toLocaleDateString();\n            xDateArr.push(datetmp);\n        }\n        console.log('step 3: ' + 'currentDate = ' + currentDate + \" : date2 = \" + date2 + 'allDataInDb = ' + JSON.stringify(allDataInDb));\n        //第四步拼装数据\n        var resultDataArr = new Array();\n        //第一层循环，获得所有的接口名称\n        for (var i = 0; i < interfaceNameArr.length; i++) {\n            var tmpInterfaceName = interfaceNameArr[i];\n            var tmpResultData = new Object();\n            tmpResultData.name = tmpInterfaceName;\n            tmpResultData.type = 'line';\n            tmpResultData.data = new Array();\n            //初始化数据结果集数组\n            for(var n =0;n<xDateArr.length;n++){\n                tmpResultData.data.push(0);\n            }\n            //第二层循环，获取所有的数据\n            for (var j = 0; j < allDataInDb.length; j++) {\n                var tmpData = allDataInDb[j];\n                if (tmpInterfaceName == tmpData.interfaceName) {\n                    //第三层循环，遍历日期，如果接口名称和单个数据的名称匹配，那么看单条数据的日期是哪天push到数据结果集中\n                    for (var m = 0; m < xDateArr.length; m++) {\n                        // console.log('step3.5.... tmpData =  ' + JSON.stringify(tmpData) + ' || xDateArr[' + m + '] = ' + xDateArr[m]);\n                        // console.log('step3.6....' + this.timeStamp2String(tmpData.visitDate)+ '||' + this.timeStamp2String(xDateArr[m]));\n                        if (this.timeStamp2String(tmpData.visitDate) == this.timeStamp2String(xDateArr[m])) {\n                            var tmpobj = tmpResultData.data[m];\n                            if(tmpobj == 0){\n                                tmpResultData.data[m] = tmpData.visitNumb;\n                            }\n                            // tmpResultData.data.push(tmpData.visitNumb);\n                        } \n                    }\n                }\n            }\n            resultDataArr.push(tmpResultData);\n        }\n        console.log('step4: resultDataArr = ' + JSON.stringify(resultDataArr));\n        this.assign('interfaceNameArr', interfaceNameArr.toString());\n        this.assign('xDateArr', xDateArr.toString());\n        this.assign('resultDataArr', JSON.stringify(resultDataArr));\n\n        // 饼图数据\n        var pieResultArr = new Array();\n        var min = 0;\n        var max = 0;\n        for (var i = 0; i < interfaceNameArr.length; i++) {\n            var tmpInterfaceName = interfaceNameArr[i];\n            var tmpResultData = new Object();\n            var sumVisitNum = 0;\n            for (var j = 0; j < allDataInDb.length; j++) {\n                if (tmpInterfaceName == allDataInDb[j].interfaceName) {\n                    sumVisitNum = sumVisitNum + allDataInDb[j].visitNumb;\n                }\n            }\n            if (sumVisitNum > max) {\n                max = sumVisitNum;\n            }\n            if (sumVisitNum < min) {\n                min = sumVisitNum;\n            }\n            tmpResultData.name = tmpInterfaceName;\n            tmpResultData.value = sumVisitNum;\n            pieResultArr.push(tmpResultData);\n        }\n        this.assign('pieResultArr', JSON.stringify(pieResultArr));\n        this.assign('pieMax', max);\n        this.assign('pieMin', min);\n        return this.display(filePath);\n    }\n\n    \n\n    /*********************广告开关控制start*********************************** */\n\n    /**\n     *  http://127.0.0.1:8360/admin/commonapi/adConfig\n     */\n    async adConfigAction() {\n        var filePath = `${think.ROOT_PATH}/view/admin/ad_config.html`;\n        return this.display(filePath);\n    }\n\n    /**\n     *  http://127.0.0.1:8360/admin/commonapi/getAdConfigData\n     */\n    async getAdConfigDataAction() {\n        var adConfigData = await dbAdConfigModel.where().select();\n        console.log('adConfigData1111 =====> ' + JSON.stringify(adConfigData));\n        return this.ctx.json(adConfigData);\n    }\n\n\n    /**\n     *  http://127.0.0.1:8360/admin/commonapi/saveAdConfig\n     */\n    async saveAdConfigAction() {\n        var id = this.post('id');\n        var pkg_name = this.post('pkg_name');\n        var gdt_app_id = this.post('gdt_app_id');\n        var gdt_splash_id = this.post('gdt_splash_id');\n        var gdt_banner_id = this.post('gdt_banner_id');\n        var gdt_interstitial_id = this.post('gdt_interstitial_id');\n        var oppo_gdt_ad_is_open = this.post('oppo_gdt_ad_is_open');\n        var vivo_gdt_ad_is_open = this.post('vivo_gdt_ad_is_open');\n        var huawei_gdt_ad_is_open = this.post('huawei_gdt_ad_is_open');\n        var tencent_gdt_ad_is_open = this.post('tencent_gdt_ad_is_open');\n        var baidu_gdt_ad_is_open = this.post('baidu_gdt_ad_is_open');\n        var xiaomi_gdt_ad_is_open = this.post('xiaomi_gdt_ad_is_open');\n\n        //插入数据\n        try {\n            let addID = await dbAdConfigModel\n                .add({\n                    id: id,\n                    pkg_name: pkg_name,\n                    gdt_app_id: gdt_app_id,\n                    gdt_splash_id: gdt_splash_id,\n                    gdt_banner_id: gdt_banner_id,\n                    gdt_interstitial_id: gdt_interstitial_id,\n                    oppo_gdt_ad_is_open: oppo_gdt_ad_is_open,\n                    vivo_gdt_ad_is_open: vivo_gdt_ad_is_open,\n                    huawei_gdt_ad_is_open: huawei_gdt_ad_is_open,\n                    tencent_gdt_ad_is_open: tencent_gdt_ad_is_open,\n                    baidu_gdt_ad_is_open: baidu_gdt_ad_is_open,\n                    xiaomi_gdt_ad_is_open: xiaomi_gdt_ad_is_open\n                });\n\n            console.log('saveAdConfigAction22222====>  addID = ' + addID);\n        } catch (error) {\n            var response = new Object();\n            response.isError = true;\n            response.msg = '保存失败，数据格式有问题';\n            console.log('saveAdConfigAction3333===> : ' + this.ctx.json(response));\n            return this.ctx.json(response);\n        }\n\n        //返回跟新后的数据\n        let newData = await dbAdConfigModel.where({\n            id: id\n        }).select();\n        console.log('saveCodeMusicAction4444====> newData = ' + JSON.stringify(newData));\n        return this.ctx.json(newData);\n    }\n\n    /**\n     *  http://127.0.0.1:8360/admin/commonapi/updateAdConfig\n     */\n    async updateAdConfigAction() {\n        var id = this.post('id');\n        var pkg_name = this.post('pkg_name');\n        var gdt_app_id = this.post('gdt_app_id');\n        var gdt_splash_id = this.post('gdt_splash_id');\n        var gdt_banner_id = this.post('gdt_banner_id');\n        var gdt_interstitial_id = this.post('gdt_interstitial_id');\n        var oppo_gdt_ad_is_open = this.post('oppo_gdt_ad_is_open');\n        var vivo_gdt_ad_is_open = this.post('vivo_gdt_ad_is_open');\n        var huawei_gdt_ad_is_open = this.post('huawei_gdt_ad_is_open');\n        var tencent_gdt_ad_is_open = this.post('tencent_gdt_ad_is_open');\n        var baidu_gdt_ad_is_open = this.post('baidu_gdt_ad_is_open');\n        var xiaomi_gdt_ad_is_open = this.post('xiaomi_gdt_ad_is_open');\n\n        //更新数据\n        let affectedRows = await dbAdConfigModel\n            .where({\n                id: id\n            })\n            .update({\n                id: id,\n                pkg_name: pkg_name,\n                gdt_app_id: gdt_app_id,\n                gdt_splash_id: gdt_splash_id,\n                gdt_banner_id: gdt_banner_id,\n                gdt_interstitial_id: gdt_interstitial_id,\n                oppo_gdt_ad_is_open: oppo_gdt_ad_is_open,\n                vivo_gdt_ad_is_open: vivo_gdt_ad_is_open,\n                huawei_gdt_ad_is_open: huawei_gdt_ad_is_open,\n                tencent_gdt_ad_is_open: tencent_gdt_ad_is_open,\n                baidu_gdt_ad_is_open: baidu_gdt_ad_is_open,\n                xiaomi_gdt_ad_is_open: xiaomi_gdt_ad_is_open\n            });\n        //返回跟新后的数据\n        if (affectedRows <= 0) {\n            var response = new Object();\n            response.isError = true;\n            response.msg = '数据更新是败';\n            console.log('saveH5TypeAction : ' + this.ctx.json(response));\n            return this.ctx.json(response);\n        }\n        let newData = await dbAdConfigModel.where({\n            id: id\n        }).select();\n        console.log('updateH5TypeAction newData = ' + JSON.stringify(newData));\n        return this.ctx.json(newData);\n\n    }\n\n\n      /**\n     *  http://127.0.0.1:8360/admin/commonapi/deleteAdConfig\n     */\n    async deleteAdConfigAction() {\n        var id = this.post('id'); //easyui 删除post参数是id，此处在html中已经和_type_id 绑定\n        //跟新数据\n        let affectedRows = await dbAdConfigModel\n            .where({\n                id: id\n            })\n            .delete();\n        //返回跟新后的数据\n        if (affectedRows <= 0) {\n            var response = new Object();\n            response.isError = true;\n            response.msg = '删除数据失败';\n            console.log('deleteAdConfigAction2222 ====>' + +this.ctx.json(response));\n            return this.ctx.json(response);\n        }\n        var response = new Object();\n        response.success = true; //返回true 响应删除成功，页面刷新\n        return this.ctx.json(response);\n\n    }\n\n    /******************************工具方法************************************************************** */\n    /**\n     * 判断是否已经登录\n     */\n    async isLogined() {\n        var userInfo = await this.session('userInfo');\n        console.log('isLogined = ' + !think.isEmpty(userInfo) + \".....\");\n        return !think.isEmpty(userInfo);\n    }\n\n    timeStamp2String(time) {\n        var datetime = new Date(time.replace(/-/, \"/\"))\n        // console.log('timeStamp2String111  ====>' + datetime.toLocaleDateString());\n        var year = datetime.getFullYear();\n        var month = datetime.getMonth() + 1 < 10 ? \"0\" + (datetime.getMonth() + 1) : datetime.getMonth() + 1;\n        var date = datetime.getDate() < 10 ? \"0\" + datetime.getDate() : datetime.getDate();\n        var hour = datetime.getHours() < 10 ? \"0\" + datetime.getHours() : datetime.getHours();\n        var minute = datetime.getMinutes() < 10 ? \"0\" + datetime.getMinutes() : datetime.getMinutes();\n        var second = datetime.getSeconds() < 10 ? \"0\" + datetime.getSeconds() : datetime.getSeconds();\n        // console.log('timeStamp2String222  ====>' + year + \"-\" + month + \"-\" + date);\n        return year + \"-\" + month + \"-\" + date;\n    }\n\n    checkURL(URL) {\n        var str = URL;\n        //判断URL地址的正则表达式为:http(s)?://([\\w-]+\\.)+[\\w-]+(/[\\w- ./?%&=]*)?\n        //下面的代码中应用了转义字符\"\\\"输出一个字符\"/\"\n        var Expression = /http(s)?:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- .\\/?%&=]*)?/;\n        var objExp = new RegExp(Expression);\n        if (objExp.test(str) == true) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n};"
    ]
}